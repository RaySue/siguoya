// ç»™å®šä¸€ä¸ªåªåŒ…å«æ•´æ•°çš„æœ‰åºæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½ä¼šå‡ºç°ä¸¤æ¬¡ï¼Œå”¯æœ‰ä¸€ä¸ªæ•°åªä¼šå‡ºç°ä¸€æ¬¡ï¼Œæ‰¾å‡ºè¿™ä¸ªæ•°ã€‚
//
// ç¤ºä¾‹ 1: 
//
//     [-1,0,1,2,3,4,8]
//     [-1,-1,0,0,1,1,2] [0,1,1,2,2]
//è¾“å…¥: [-1,-1,0,0,1,1,2,3,3,4,4,8,8]
//è¾“å‡º: 2
// 
//
// ç¤ºä¾‹ 2: 
//
//
//
//è¾“å…¥: [3,3,7,7,10,11,11]
//è¾“å‡º: 10
// 
//
// æ³¨æ„: æ‚¨çš„æ–¹æ¡ˆåº”è¯¥åœ¨ O(log n)æ—¶é—´å¤æ‚åº¦å’Œ O(1)ç©ºé—´å¤æ‚åº¦ä¸­è¿è¡Œã€‚ 
// Related Topics äºŒåˆ†æŸ¥æ‰¾ 
// ğŸ‘ 186 ğŸ‘ 0


//leetcode submit region begin(Prohibit modification and deletion)
class Solution
{
public:

    // base æ–¹æ³• O(N) å¤æ‚åº¦
    int singleNonDuplicate1(vector<int> &nums)
    {
        int ret = 0;
        for (int i = 0; i < nums.size(); ++i)
        {
            ret ^= nums[i];
        }
        return ret;
    }

    // å¤åˆé¢˜æ„çš„äºŒåˆ†æ³• O(logN)å¤æ‚åº¦
    // è¿™ä¸ªé¢˜ç›®éœ€è¦æ„å»ºçš„äºŒåˆ†æ³•ç›¸å¯¹éšæ™¦ï¼Œèƒ½å¤Ÿä½¿ç”¨äºŒåˆ†æ³•çš„å‰ææ˜¯ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ ¹æ®æ¡ä»¶æ¥åˆ¤æ–­ï¼šæ”¶ç¼©è¾¹ç•Œ
    // 1. ä»€ä¹ˆæ—¶å€™è¿”å› 2. ä»€ä¹ˆæ—¶å€™æ”¶ç¼©å·¦è¾¹ç•Œ 3. ä»€ä¹ˆæ—¶å€™æ”¶ç¼©å³è¾¹ç•Œ
    //
    // è§‚å¯Ÿå‘ç°ï¼š
    // å•ä¸ªæ•°å­—å‡ºç°ä¹‹å‰ï¼Œæ¯ä¸ªæ•°å­—éƒ½å¤§äºå‰ä¸€ä¸ªç›¸é‚»çš„æ•°å­—ï¼Œæ­¤æ—¶æ”¶ç¼©å·¦è¾¹ç•Œ
    // å•ä¸ªæ•°å­—å‡ºç°ä¹‹åï¼Œæ¯ä¸ªæ•°å­—éƒ½ç­‰äºå‰ä¸€ä¸ªç›¸é‚»çš„æ•°å­—ï¼Œæ­¤æ—¶æ”¶ç¼©å³è¾¹ç•Œ
    // [1,1,2,3,*3,4,4,8,8]  9 / 2 = 4
    // [2,3,3,*4,4,8,8] 7 / 2 = 3
    int singleNonDuplicate(vector<int> &nums)
    {
        if (nums.empty()) return 0;
        if (nums.size() < 2) return nums[0];
        int l = 0, r = nums.size() - 1, mid;
        while (l <= r)
        {
            mid = l + (r - l >> 1);
            // åˆ¤è¯»ç›¸ç­‰çš„æƒ…å†µ
            bool cond1 = mid == 0 && nums[mid] < nums[mid + 1];
            if (cond1) return nums[mid];
            bool cond2 = (nums[mid] > nums[mid - 1]) && (mid == nums.size() - 1 || nums[mid] < nums[mid + 1]);
            if (cond2) return nums[mid];
            // åˆ¤æ–­æ”¶ç¼©è¾¹ç•Œ
            // åˆ¤æ–­ mid æ˜¯å¥‡æ•°çš„æƒ…å†µ
            if (mid % 2 != 0)
            {
                // æ˜¯å¶æ•°è¦å’Œç›¸é‚»çš„å‰ä¸€ä½ä½œå¯¹æ¯”
                if (nums[mid - 1] == nums[mid])
                {
                    l = mid + 1;
                } else
                {
                    r = mid - 1;
                }
            }
            // åˆ¤æ–­ mid æ˜¯å¶æ•°çš„æƒ…å†µ
            if (mid % 2 == 0)
            {
                if (nums[mid - 1] == nums[mid])
                {
                    r = mid - 1;
                } else
                {
                    l = mid + 1;
                }
            }
        }
        return -1;
    }
};
//leetcode submit region end(Prohibit modification and deletion)
