// ç»™å®šä¸€ä¸ªéžç©ºäºŒå‰æ ‘ï¼Œè¿”å›žå…¶æœ€å¤§è·¯å¾„å’Œã€‚
//
// æœ¬é¢˜ä¸­ï¼Œè·¯å¾„è¢«å®šä¹‰ä¸ºä¸€æ¡ä»Žæ ‘ä¸­ä»»æ„èŠ‚ç‚¹å‡ºå‘ï¼Œæ²¿çˆ¶èŠ‚ç‚¹-å­èŠ‚ç‚¹è¿žæŽ¥ï¼Œè¾¾åˆ°ä»»æ„èŠ‚ç‚¹çš„åºåˆ—ã€‚
// è¯¥è·¯å¾„è‡³å°‘åŒ…å«ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸”ä¸ä¸€å®šç»è¿‡æ ¹èŠ‚ç‚¹ã€‚
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// è¾“å…¥ï¼š[1,2,3]
//
//       1
//      / \
//     2   3
//
//è¾“å‡ºï¼š6
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// è¾“å…¥ï¼š[-10,9,20,null,null,15,7]
//
//Â   -10
//Â  Â / \
//Â  9 Â 20
//Â  Â  / Â \
//Â  Â 15 Â  7
//
//è¾“å‡ºï¼š42 
// Related Topics æ ‘ æ·±åº¦ä¼˜å…ˆæœç´¢ 
// ðŸ‘ 688 ðŸ‘Ž 0


//leetcode submit region begin(Prohibit modification and deletion)
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode(int x) : val(x), left(NULL), right(NULL) {}
 * };
 */
class Solution
{
public:


    //  éåŽ†å­æ ‘æœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š

    //  è·¯å¾„åœåœ¨å½“å‰å­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œæ”¶ç›Šï¼šroot->val
    //  èµ°å…¥å·¦å­æ ‘ï¼Œæœ€å¤§æ”¶ç›Šï¼šmax(root->val, root->val + dfs(root->left))
    //  èµ°å…¥å³å­æ ‘ï¼Œæœ€å¤§æ”¶ç›Šï¼šmax(root->val, root->val + dfs(root->right))
    //
    //  è§„é¿æŽ‰ è´Ÿæ•° ä¹‹åŽï¼ŒèŠ‚ç‚¹çš„æœ€å¤§æ”¶ç›Šæ˜¯ root->val + left + right
    //
    //  éåŽ†èŽ·å–æœ€å¤§æ”¶ç›Š max(maxSum, root->val + left + right);

    // æŠ½è±¡æ€è€ƒé€’å½’é—®é¢˜ï¼š
    // å…ˆè€ƒè™‘ä¸€ä¸ªç”±ä¸‰ä¸ªèŠ‚ç‚¹æž„æˆçš„äºŒå‰æ ‘
    //      1
    //     / \
    //   -1   2
    // å¾ˆæ˜Žæ˜¾æœ€å¤§è·¯å¾„å’Œå°±æ˜¯ 1->2
    // æˆ‘ä»¬å¯¹è¿™ä¸ªè¿‡ç¨‹è®¡ç®—ä¸€ä¸‹
    // 1. è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„æœ€å¤§å€¼ï¼ˆä»Žå·¦èŠ‚ç‚¹æˆ–å³èŠ‚ç‚¹é€‰æ‹©ä¸€ä¸ªæœ€å¤§å€¼ç›¸åŠ ï¼‰ï¼Œå¦‚æžœå°äºŽ0ï¼Œé‚£ä¹ˆå°±æ˜¯è®¾ç½®ä¸º 0 ï¼š
    //      3 = max(1, 1 + max(0, 2))
    //     / \
    //    0   2
    // 2. éåŽ†æ±‚å’Œï¼Œé¢˜ç›®è®©ä½ æ±‚å’Œï¼Œæ²¡è®©ä½ ç»™å‡ºè·¯å¾„ï¼Œæ‰€ä»¥ç›¸åŠ å³å¯ï¼Œé‚£æœ‰äººè¯´äº†ï¼Œ ä½ è¿™æ ·åšï¼Œå¦‚æžœ å·¦å­æ ‘ä¸‹é¢æœ‰æ›´å¤§çš„å€¼å‘¢ï¼Ÿ
    //
    // å†è€ƒè™‘ä¸€ä¸ªä¸‰å±‚çš„å­æ ‘

    /*  1. å…ˆè®¡ç®—æœ€å¤§å’Œçš„è·¯å¾„ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½é€‰å–å…¶å·¦å³å­æ ‘çš„æœ€å¤§å€¼(root->val + max(left, right))ï¼Œ
     *  é‚£ä¹ˆå¤‡é€‰è·¯å¾„è‡ªç„¶å°±æœ‰äº†ï¼Œå·¦äºŒå›¾æ‰€ç¤ºï¼ŒèŠ±æ‹¬å·è¡¨ç¤ºé€‰æ‹©çš„è·¯å¾„
     *
     *  2. åœ¨éåŽ†æ±‚å–æœ€å¤§å’Œçš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ä¸€ä¸ªå…¨å±€å˜é‡æ¥ç»´æŠ¤ä¸€ä¸ªæœ€å¤§å€¼å³å¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„æœ€å¤§å€¼ä¸º root->val + left + right
     *
     *  ä¸Šé¢æåˆ°çš„ left å’Œ right æ˜¯å·¦å³å­æ ‘çš„æœ€ä¼˜å€¼ï¼ˆroot->val + max(left, rightï¼‰
     *
     *        1                      12(19)
     *      /  \                   {    }
     *    -1    2            (12) 7     11(18)
     *   / \   / \              /  }    /   }
     *  5  8  7   9        (5)5  (8)8  7(7) 9(9)
     *
     *  è¿™ä¸ªå°±å¤æ‚äº†ï¼Œä¸€çœ¼çœ‹ä¸å‡ºç»“æžœçš„ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯è‡ªåº•å‘ä¸Šå…ˆè®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„æœ€å¤§è·¯å¾„å’Œ
     *
     */

    int ans = INT_MIN;

    int dfs(TreeNode* root)
    {
        if (!root) return 0;
        int left = max(dfs(root->left), 0);
        int right = max(dfs(root->right), 0);
        ans = max(ans, root->val + left + right);
        return root->val + max(left, right);
    }

    int maxPathSum(TreeNode* root)
    {
        dfs(root);
        return ans;
    }
};
//leetcode submit region end(Prohibit modification and deletion)
